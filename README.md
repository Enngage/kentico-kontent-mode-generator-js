[![npm version](https://badge.fury.io/js/%40kentico%2Fkontent-model-generator.svg)](https://badge.fury.io/js/%40kentico%2Fkontent-model-generator)
[![Build](https://github.com/Kentico/kontent-model-generator-js/actions/workflows/main.yml/badge.svg)](https://github.com/Kentico/kontent-model-generator-js/actions/workflows/main.yml)
[![GitHub license](https://img.shields.io/github/license/Kentico/kontent-model-generator-js.svg)](https://github.com/Kentico/kontent-model-generator-js)

# Kontent Model Generator

The purpose of this project is to help you generate `Typescript models` based on [Kontent by Kentico](https://kontent.ai) item types. These models can be used with the [Kontent Delivery SDK](https://www.npmjs.com/package/@kentico/kontent-delivery) and enhances your experience by providing strongly typed models.

## Installation

Install package globally so you can use it anywhere:

`npm i @kentico/kontent-model-generator -g`

## Generate models with CLI

Go to folder where you want to create models and run:

`kontent-generate --projectId=xxx --apiKey=yyy`

You may specify other options like:

`kontent-generate --projectId=xxx --apiKey=yyy --addTimestamp=false --elementResolver=camelCase`

## Generate models in code

Apart from generating models via CLI, you may also generate models in code which also gives you some additional configuration options (such as using custom name resolver).

```typescript
import { generateModelsAsync } from '@kentico/kontent-model-generator';

await generateModelsAsync({
    sdkType: 'delivery',
    projectId: 'da5abe9f-fdad-4168-97cd-b3464be2ccb9',
    apiKey: 'yyy',
    addTimestamp: true,
    elementResolver: 'camelCase',
})
```

### Customizing generated file names

You may customize the way filenames are stored on file system using the `contentTypeFileResolver` and / or `taxonomyTypeFileResolver` configuration option:

```typescript
await generateModelsAsync({
  sdkType: 'delivery',
  projectId: 'da5abe9f-fdad-4168-97cd-b3464be2ccb9',
  apiKey: 'yyy',
  addTimestamp: true,
  elementResolver: 'camelCase',
  contentTypeFileResolver: (type) => `content_type_${type.system.codename}`,
  taxonomyTypeFileResolver: (type) => `taxonomy_${type.system.codename}`,
});
```

### Customizing generated content type names

You may customize name of content types using the `contentTypeResolver` configuration option and taxonomy types with the `taxonomyTypeResolver` option:

```typescript
await generateModelsAsync({
  sdkType: 'delivery',
  projectId: 'da5abe9f-fdad-4168-97cd-b3464be2ccb9',
  apiKey: 'yyy',
  addTimestamp: true,
  elementResolver: 'camelCase',
  contentTypeResolver: (type) => `${textHelper.toPascalCase(type.system.codename)}Model`,
  taxonomyTypeResolver: (type) => `${textHelper.toPascalCase(type.system.codename)}Taxonomy`,
});
```

## CLI Configuration

- `projectId` - Id of the Kontent project
- `apiKey`- Management API Key
- `addTimestamp`- Indicates if timestamp is added to generated models
- `elementResolver`- Name resolver for elements. Available options are: `camelCase`, `pascalCase`, `snakeCase`
- `contentTypeFileResolver`- Name resolver for content type filenames. Available options are: `camelCase`, `pascalCase`, `snakeCase`
- `taxonomyTypeFileResolver`- Name resolver for taxonomy filenames. Available options are: `camelCase`, `pascalCase`, `snakeCase`
- `contentTypeResolver`- Name resolver for content type names. Available options are: `camelCase`, `pascalCase`, `snakeCase`
- `taxonomyTypeResolver`- Name resolver for taxonomy type names. Available options are: `camelCase`, `pascalCase`, `snakeCase`
- `sdkType`- Type of sdk for which models are generated. Available options are: `delivery`, `management`

## Example models

Generator creates file for each content type in your project. For example:

`movie.ts`

```typescript
import { IContentItem, Elements } from '@kentico/kontent-delivery';
import { Actor } from './actor';
import { ReleaseCategory } from '../taxonomies/releasecategory';

/**
 * Generated by '@kentico/kontent-model-generator@4.1.0' at 'Mon, 28 Mar 2022 14:36:32 GMT'
 *
 * Movie
 * Id: b0c0f9c2-ffb6-4e62-bac9-34e14172dd8c
 * Codename: movie
 */
export type Movie = IContentItem<{
  /**
   * Title (text)
   * Required: true
   * Id: 3473187e-dc78-eff2-7099-f690f7042d4a
   * Codename: title
   */
  title: Elements.TextElement;

  /**
   * Plot (rich_text)
   * Required: false
   * Id: f7ee4f27-27fd-a19b-3c5c-102aae1c50ce
   * Codename: plot
   */
  plot: Elements.RichTextElement;

  /**
   * Released (date_time)
   * Required: false
   * Id: 5ccf4644-0d65-5d96-9a32-f4ea21974d51
   * Codename: released
   */
  released: Elements.DateTimeElement;

  /**
   * Length (number)
   * Required: false
   * Id: 7e8ecfab-a419-27ee-d8ec-8adb76fd007c
   * Codename: length
   */
  length: Elements.NumberElement;

  /**
   * Poster (asset)
   * Required: false
   * Id: a39a7237-9503-a1ae-8431-5b6cdb85ae9d
   * Codename: poster
   */
  poster: Elements.AssetsElement;

  /**
   * Category (multiple_choice)
   * Required: false
   * Id: 9821c252-6414-f549-c17f-cc171dd87713
   * Codename: category
   */
  category: Elements.MultipleChoiceElement;

  /**
   * Stars (modular_content)
   * Required: false
   * Id: aa26a55d-19f8-7501-fea3-b0d9b1eeac71
   * Codename: stars
   */
  stars: Elements.LinkedItemsElement<Actor | Movie>;

  /**
   * SeoName (url_slug)
   * Required: false
   * Id: 756cc91a-a090-60f9-a7f0-f505bfbe046c
   * Codename: seoname
   */
  seoname: Elements.UrlSlugElement;

  /**
   * Required: false
   * Id: 65f2fd44-1856-bc2b-17c2-decb0635e3d2
   */
  releasecategory: Elements.TaxonomyElement<ReleaseCategory>;
}>;

```

`actor.ts`
```typescript
import { IContentItem, Elements } from '@kentico/kontent-delivery';
/**
 * Generated by '@kentico/kontent-model-generator@4.1.0' at 'Mon, 28 Mar 2022 14:36:32 GMT'
 *
 * Actor
 * Id: 58099989-319f-495f-aa36-cb3710854e36
 * Codename: actor
 */
export type Actor = IContentItem<{
  /**
   * Url (url_slug)
   * Required: false
   * Id: c8658782-f209-a573-9c85-430fb4e3e9f0
   * Codename: url
   */
  url: Elements.UrlSlugElement;

  /**
   * First name (text)
   * Required: true
   * Id: 14dd70e5-c42d-f111-9640-c82b443edf1d
   * Codename: first_name
   *
   * This is the first name of the actor
   */
  firstName: Elements.TextElement;

  /**
   * Last name (text)
   * Required: true
   * Id: 9f7a0dd4-af3a-95ca-0358-400c14ce7075
   * Codename: last_name
   */
  lastName: Elements.TextElement;

  /**
   * Photo (asset)
   * Required: false
   * Id: eaec9ba3-9624-6875-04ec-80d0b2e00781
   * Codename: photo
   */
  photo: Elements.AssetsElement;
}>;
```

`movietype.ts`
```typescript
/**
 * Generated by '@kentico/kontent-model-generator@4.1.0' at 'Mon, 28 Mar 2022 14:36:32 GMT'
 *
 * MovieType
 * Id: 365a17e6-1929-27ab-9f67-a9273c846717
 * Codename: movietype
 */
export type MovieType =
  | 'student'
  | 'film'
  | 'tv'
  | 'blockbuster'
  | 'cinema_only';
```

Generator also creates `_project.ts` file with strongly typed definitions for `languages`, `content types` and `taxonomies`. You can use these in your poject to easily access codenames / names of these objects instead of using strings as identifiers. 

## Example project structure

Example `_project.ts` output: 

```typescript
/**
 * Generated by '@kentico/kontent-model-generator@4.1.0' at 'Mon, 28 Mar 2022 14:36:32 GMT'
 *
 * Movie Database
 * Id: da5abe9f-fdad-4168-97cd-b3464be2ccb9
 * Environment: Production
 */
export const projectModel = {
  languages: {
    /**
     * English
     * Id: 00000000-0000-0000-0000-000000000000
     * Codename: en
     * Is Active: true
     * Is Default: true
     * Fallback language Id: 00000000-0000-0000-0000-000000000000
     */
    en: {
      codename: 'en',
      name: 'English',
    },

    /**
     * cz
     * Id: 41ccb26f-ceab-04d0-6ffa-9c7c5358aa8f
     * Codename: cz
     * Is Active: true
     * Is Default: false
     * Fallback language Id: 00000000-0000-0000-0000-000000000000
     */
    cz: {
      codename: 'cz',
      name: 'cz',
    },

    /**
     * German
     * Id: 14f7bcc0-4fd6-4b77-8c22-70e5ccfdae1d
     * Codename: German
     * Is Active: false
     * Is Default: false
     * Fallback language Id: 00000000-0000-0000-0000-000000000000
     */
    German: {
      codename: 'German',
      name: 'German',
    },
  },
  contentTypes: {
    /**
     * Movie
     * Id: b0c0f9c2-ffb6-4e62-bac9-34e14172dd8c
     * Codename: movie
     */
    movie: {
      codename: 'movie',
      name: 'Movie',
      elements: {
        /**
         * Title (text)
         * Required: true
         * Id: 3473187e-dc78-eff2-7099-f690f7042d4a
         * Codename: title
         */
        title: {
          codename: 'title',
          name: 'Title',
        },

        /**
         * Plot (rich_text)
         * Required: false
         * Id: f7ee4f27-27fd-a19b-3c5c-102aae1c50ce
         * Codename: plot
         */
        plot: {
          codename: 'plot',
          name: 'Plot',
        },

        /**
         * Released (date_time)
         * Required: false
         * Id: 5ccf4644-0d65-5d96-9a32-f4ea21974d51
         * Codename: released
         */
        released: {
          codename: 'released',
          name: 'Released',
        },

        /**
         * Length (number)
         * Required: false
         * Id: 7e8ecfab-a419-27ee-d8ec-8adb76fd007c
         * Codename: length
         */
        length: {
          codename: 'length',
          name: 'Length',
        },

        /**
         * Poster (asset)
         * Required: false
         * Id: a39a7237-9503-a1ae-8431-5b6cdb85ae9d
         * Codename: poster
         */
        poster: {
          codename: 'poster',
          name: 'Poster',
        },

        /**
         * Category (multiple_choice)
         * Required: false
         * Id: 9821c252-6414-f549-c17f-cc171dd87713
         * Codename: category
         */
        category: {
          codename: 'category',
          name: 'Category',
        },

        /**
         * Stars (modular_content)
         * Required: false
         * Id: aa26a55d-19f8-7501-fea3-b0d9b1eeac71
         * Codename: stars
         */
        stars: {
          codename: 'stars',
          name: 'Stars',
        },

        /**
         * SeoName (url_slug)
         * Required: false
         * Id: 756cc91a-a090-60f9-a7f0-f505bfbe046c
         * Codename: seoname
         */
        seoname: {
          codename: 'seoname',
          name: 'SeoName',
        },
      },
    },

    /**
     * Actor
     * Id: 58099989-319f-495f-aa36-cb3710854e36
     * Codename: actor
     */
    actor: {
      codename: 'actor',
      name: 'Actor',
      elements: {
        /**
         * Url (url_slug)
         * Required: false
         * Id: c8658782-f209-a573-9c85-430fb4e3e9f0
         * Codename: url
         */
        url: {
          codename: 'url',
          name: 'Url',
        },

        /**
         * First name (text)
         * Required: true
         * Id: 14dd70e5-c42d-f111-9640-c82b443edf1d
         * Codename: first_name
         *
         * This is the first name of the actor
         */
        first_name: {
          codename: 'first_name',
          name: 'First name',
        },

        /**
         * Last name (text)
         * Required: true
         * Id: 9f7a0dd4-af3a-95ca-0358-400c14ce7075
         * Codename: last_name
         */
        last_name: {
          codename: 'last_name',
          name: 'Last name',
        },

        /**
         * Photo (asset)
         * Required: false
         * Id: eaec9ba3-9624-6875-04ec-80d0b2e00781
         * Codename: photo
         */
        photo: {
          codename: 'photo',
          name: 'Photo',
        },
      },
    },
  },
  taxonomies: {
    /**
     * MovieType
     * Id: 365a17e6-1929-27ab-9f67-a9273c846717
     * Codename: movietype
     */
    movietype: {
      codename: 'movietype',
      name: 'MovieType',
      terms: {
        student: {
          codename: 'student',
          name: 'Student',
          terms: {},
        },
        film: {
          codename: 'film',
          name: 'Film',
          terms: {
            tv: {
              codename: 'tv',
              name: 'TV',
              terms: {},
            },
            blockbuster: {
              codename: 'blockbuster',
              name: 'Blockbuster',
              terms: {},
            },
            cinema_only: {
              codename: 'cinema_only',
              name: 'Cinema only',
              terms: {},
            },
          },
        },
      },
    },

    /**
     * ReleaseCategory
     * Id: 09b6a348-0f86-7a68-4af3-7cab9a5c60b7
     * Codename: releasecategory
     */
    releasecategory: {
      codename: 'releasecategory',
      name: 'ReleaseCategory',
      terms: {
        global_release: {
          codename: 'global_release',
          name: 'Global release',
          terms: {},
        },
        us_only: {
          codename: 'us_only',
          name: 'US only',
          terms: {},
        },
        local_release: {
          codename: 'local_release',
          name: 'Local release',
          terms: {},
        },
      },
    },
  },
};
```

## Contribution & Feedback

Contributions are welcomed. Simply make a pull request.

